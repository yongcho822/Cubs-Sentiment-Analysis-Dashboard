<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Deez Cubs</title>
    <link href="https://s3.amazonaws.com/cubsfletcher/nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://s3.amazonaws.com/cubsfletcher/d3.js" charset="utf-8"></script>
    <script src="https://s3.amazonaws.com/cubsfletcher/nv.d3.js"></script>
    <script src="https://s3.amazonaws.com/cubsfletcher/jquery-1.11.3.min.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }
        svg {
            /*display: block;*/
            position: relative;
            z-index: 1;
        }
        html, body, #container, svg {
            margin: 0px;
            padding: 0px;
            padding-right: 3px;
            height: 100%;
            width: 100%;
            font-family: "Century Gothic";
            /*font-family:'Open Sans', sans-serif;*/
        }
        #headercontainer{
            position: relative;
            height: 100%
        }
        #container{
            position: relative;
            height: 100%;
            text-align: center;
        }
        #extracontainer{
            position: relative;
            height: 100%;
            width: 100%;
        }
        .chart {
            height: 40%;
            margin-top: -20px;
        }
        #chart1 {
            position: relative;
            width: 97%;
            margin: auto;
            /*margin-bottom: 0px;*/
        }
        #chart2 {
            position: relative;
            width: 97.5%;
            margin: auto;
/*            margin-bottom: 5px;*/
        }
        #titletext{
            /*top:5%;*/
        }
        #titleheader{
            font-family: Helvetica;
            font-size: 100px;
            color: #00006B;
            line-height: 80%;      
            margin-top: 3%;
        }
        #subtitleheader{
            font-family: Helvetica;
            font-size: 50px;
            color: #FF5C5C;
            line-height: 80%;      
            margin-top: 10%;
            width:40%;
        }
        #scrollbutton{
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-bottom: 3%;
        }
        #main_header {
            margin: auto;
            margin-top: 8px;
            text-align: center;
            font-weight: bold;
            font-size: 18px;
            color: #00006B;
            text-decoration: underline;
            border-bottom: 3px solid #FF5C5C;
            display: inline-block;
        }
        #main_header2 {
            margin: auto;
            text-align: center;
            font-size: 14px;
            color: #00006B;
            text-decoration: underline;
            border-bottom: 3px solid #FF5C5C;
            display: inline-block;
            margin-bottom: 10px;
        }


        #cont1, #cont2, #cont3, #cont4 {
            width: 50%;
            display: inline-block;
            text-align: center;
            float: left;
            margin-bottom: -1%;
        }

        #FreqChartContainer {
        }
        #ClusterChartContainer {
            /*position: relative;*/
            /*display: inline-block;*/
            /*margin: auto;*/
            margin-left: -20px;
            margin-top: 30px;
            float:none;
            /*margin: 0px;*/
        }
        #PieChartContainer {
            float: none;
            margin-left: 3%;
        }
        #BenchChartContainer {
            /*margin-left: -340px;*/
            /*width: 500px;*/
            float: none;
            /*float: right;*/
            /*display: inline-block;*/
        }
        #Bench1 {
            float: left;
            /*position: relative;*/
        }
        #Pie1 {
            float: none;
            margin-bottom: 3%;
            /*margin-left: 0px;*/
            padding-left: 20px;
        }
        #Cluster1 {
            margin-right: -5px;
            vertical-align: top;
        }
        #Cluster2 {
            margin-right: 10px;
            /*float: right;*/
        }
        #subheaderPie {
            color: #00006B;
            margin-left: -133px;
            display: inline-block;
            border-bottom: 3px solid #FF5C5C;
        }
        #subheaderBench {
            color: #00006B;
            margin-left: -185px;
            display: inline-block;
            border-bottom: 3px solid #FF5C5C;
        }
        #stupid {
            display: inline;
        }
        .subheader {
            color: #00006B;
            margin-left: -150px;
            display: inline-block;
            border-bottom: 3px solid #FF5C5C;
/*            i wanna set the border-bottom length to the image size - 
              do i have to change the div size itself and then match it to that size?*/   
        }
        p.small{
            /*position: relative;*/
            font-size: 12px;
            width: 380px;
            word-wrap: break-word;
            margin-top: -30px;
            /*margin-left: 10%;*/
            margin-left: 66px;
            text-align: left;
            /*margin-right: 50px;*/
        }
        #longP{
            font-size: 12px;
            width: 150px;
            float: none;
            word-wrap: break-word;
            display: inline-block;
            text-align: left;
            margin-left: -25px;
        }
        #longB{
            font-size: 12px;
            width: 150px;
            float: left;
            word-wrap: break-word;
            display: inline-block;
            text-align: left;
        }
        .game_header{
            font-size:15px;
            color: #00006B;
            margin-left: 6%;
            margin-bottom: 0px;
            text-align: left;
            font-weight: normal;
            text-decoration: underline;
            margin-top: 10px;
        }
        .game_description{
            font-size: 12px;
            color:#00006B;
            text-align: left;
            margin-left: 6%;
            word-wrap: break-word;
            width: 450px;
            margin-top: 0px;
            margin-bottom: 0px;
        }
        .game_description2{
            font-size: 12px;
            color:#00006B;
            text-align: left;
            margin-left: 6%;
            word-wrap: break-word;
            width: 585px;
            margin-top: 0px;
            margin-bottom: 0px;
        }
        #yong {
            position: absolute; 
            text-align: left; 
            vertical-align: top; 
            font-size: 10px;
            left:6%;
            top:0%;
            /*margin-left: 3%;*/
            width:300px;
        }
        #summary {
            position: absolute; 
            text-align: right; 
            vertical-align: top; 
            font-size: 10px;
            right:2.5%;
            top:0%;
            /*margin-left: 3%;*/
            width:300px;
        }
        #titlesummary {
            position: absolute; 
            text-align: right; 
            vertical-align: top; 
            font-size: 14px;
            right:2.5%;
            top:80%;
            /*margin-left: 3%;*/
            width:400px;
        }
        #analysis-disclaimer{
            margin-top: 3px;
            position: absolute;
            right:70.5%;
            font-size: 10px;
            width: 300px;
            word-wrap: break-word;
            text-align: left;
        }
        .charttxt{
            font-size: 30%;
/*            text-align: left;*/
            word-wrap: break-word;
            position: absolute;
        }
        #txt1{
            width: 70px;
            top:35%;
            left:23%;
            color: #00006B;
        }
        #txt2{
            width: 70px;
            top:25%;
            left:50%;
            color: #00006B;
        }
        #txt3{
            width: 70px;
            top:21%;
            left:61%;
            color: #00006B;
        }
        #txt4{
            width: 70px;
            top:34%;
            left:70%;
            color: #00006B;
        }
        #txt5{
            width: 70px;
            top:34%;
            left:80%;
            color: #00006B;
        }
        #txt6{
            width: 70px;
            top:21%;
            left:86.5%;
            color: #00006B;
        }
        #txt7{
            width: 70px;
            top:71%;
            left:8.5%;
            color: #FF5C5C;
        }
        #txt8{
            width: 70px;
            top:79.5%;
            left:22%;
            color: #FF5C5C;
        }
        #txt9{
            width: 70px;
            top:78.5%;
            left:55%;
            color: #00006B;
        }
        #txt10{
            width: 70px;
            top:66%;
            left:63.5%;
            color: #00006B;
        }
        #txt11{
            width: 70px;
            top:70%;
            left:75%;
            color: #00006B;
        }
        #txt12{
            width: 70px;
            top:77%;
            left:83.5%;
            color: #FF5C5C;
        }
        #txt13{
            width: 70px;
            top:77%;
            left:92%;
            color: #FF5C5C;
        }
        #txt14{
            width: 300px;
            top:79.5%;
            left:30%;
            color: #0099FF;
        }
        #bottomlogo{
            position: relative;
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 5px;
            margin-bottom: 0%;
            z-index: 10;
            opacity: 0.7;
            }
        #last{
            text-align: center;
            font-size: 10px;
            display: block;
            margin-left: auto;
            margin-right: auto;
            margin-top: 0px;
            margin-bottom: 1%;
        }
     </style>
</head>
<body class='with-3d-shadow with-transitions'>
    
    <div id="headercontainer">
        <div id="titletext">
            <h1 id="titleheader">Sentiment Analysis&<br>Benchmarking&<br>Clustering.</h1>
            <h2 id="subtitleheader">Analyzing in-game Tweets for the Chicago Cubs.</h2>
            <a href="#container"><img id="scrollbutton" src="https://s3.amazonaws.com/cubsfletcher/scrollarrow.png"></a>
            <p id='titlesummary'><b>Designed by <a href="http://www.yongcho.com/about">Yong Cho</a></b>.<br>(Best viewed @ 100% zoom,<br>not completely responsive yet)</p>
        </div>
    </div>

    <div id="container">
        <p id="main_header">Sentiment Analysis:</p><br>
        <p id="main_header2"><b>Stacked Area Charts</b> of Tweets containing the word <b>"Cubs"</b> during Cubs games</p>
        <!-- <p id='yong'><b>Designed by <a href="http://www.yongcho.com/about">Yong Cho</a></b>.<br>(Best viewed @ 100% zoom,<br>not completely responsive yet)</p> -->
        <p id='yong'>Tweets collected 10 mins before game to 10 mins after game.<br>Twitter's livestream only provides 1% of all tweets,<br>but we can still get a good idea of overall tweetflow.<br>Sentiment classification done using <a href="http://www.monkeylearn.com/home/?utm_expid=84507841-4.OSuz1mgnT4-TJT84m-hP1Q.1">MonkeyLearn.</a></p>
        <p id="summary"><b>Stacked Area Charts</b> allow us to see the flow of total number of tweets during a game, while also showing the spikes and dips of the individual sentiments.<br></br>Click on a sentiment to view that one by itself,<br>or vs just one other sentiment.</p>
        <div>
            <h4 class="game_header">Brewers vs Cubs, <b>W 2-9</b>, Thursday, Aug 13th</h4>
            <p class="game_description">Coming in red-hot, having won 13 of their past 14 games, the Chicago Cubs had themselves a HR-derby while sweeping the visiting Milwaukee Brewers.</p>
        </div>
        <div class="chart">
            <svg id="chart1"></svg>
            <p class="charttxt" id="txt1">Soler RBI puts the Cubs in front <b>1-0</b></p>
            <p class="charttxt" id="txt2">Back-to-back HRs by Fowler & Schwarber make it <b>4-1</b> Cubs</p>
            <p class="charttxt" id="txt3">Rizzo HR makes it Back-to-back-to-back HRs</p>
            <p class="charttxt" id="txt4">Schwarber hits his 2nd HR of the day, making it <b>7-2</b></p>
            <p class="charttxt" id="txt5">Denofria HR, the Cubs' 5th of the game</p>
            <p class="charttxt" id="txt6">Cubs win! Retweets galore!</p>
            <svg height="100%" width="100%">
                <line x1="28%" y1="70%" x2="55%" y2="70%" stroke="grey" stroke-dasharray="5 5"/>
            </svg>
            <p class="charttxt" id="txt14">rain, rain, go away</p>
        </div>
        <div>
            <h4 class="game_header">Tigers vs Cubs, <b><font color="red">L 10-8</font></b>, Tuesday, Aug 18th</h4>
            <p class="game_description2">While the game was <u>rain-delayed</u> in the 3rd inning for 2 hours, both teams had plenty of fire power all night. The Cubs fell behind 3-0 in the 1st inning, and couldn't complete the comeback in this one.</p>
        </div>
        <div class="chart">
            <svg id="chart2"></svg>
            <p class="charttxt" id="txt7">Cubs fall behind <b>3-0</b> in the 1st inning</p>
            <p class="charttxt" id="txt8">Rain delay announcement</p>
            <p class="charttxt" id="txt9">Game resumption announcement</p>
            <p class="charttxt" id="txt10">Schwarber crushes a 3-run HR, cutting the Tigers' lead to <b>6-5</b></p>
            <p class="charttxt" id="txt11">Rizzo HR in the 7th inning brings the Cubs even at <b>6-6</b></p>
            <p class="charttxt" id="txt12">Tigers score 3 in the 8th inning to pull back ahead <b>9-6</b></p>
            <p class="charttxt" id="txt13">Cubs lose <b>10-8</b>. No happy retweets galore</p>
        </div>
    </div>
    <p id='analysis-disclaimer'>Following analysis all on Aug 13 game</p>
    <div id="extracontainer">
        <div id = "cont1">
            <h4 class = "subheader">Words Most Commonly Tweeted with "Cubs"</h4>
            <div id="FreqChartContainer">
                <img src="https://s3.amazonaws.com/cubsfletcher/FreqChartX.png">
            </div>
        </div>
        <div id = "cont2">
            <h4 class = "subheader">Clustering Tweets with K-means, Word2Vec, and TSNE</h4>
            <div id="ClusterChartContainer">
                <img id="Cluster1" src="https://s3.amazonaws.com/cubsfletcher/ClusterChartX.png">
                <img id="Cluster2" src="https://s3.amazonaws.com/cubsfletcher/ClusterWeirdX.png">
                <div style="clear:both"></div>
                <p class="small">In conjunction with TSNE's dimensionality reduction and coordinate generation, gensim Word2Vec's ability to separate and cluster words comes through, correctly clustering together tweets that had the word 'cub', but were totally unrelated to the baseball game. (<a href="http://www.thepetitionsite.com/814/621/906/do-not-kill-the-yellowstone-grizzly-sow-and-her-infant-cubs/">there was a bear in Yellowstone being euthanized and leaving orphan cubs for killing a hiker</a>)</p>
            </div>
        </div>
        <br>
        <div id = "cont3">
            <h4 id = "subheaderPie">Tweet Breakdown: Retweets vs Non-Retweets</h4>
            <div id="PieChartContainer">
                <p id="longP">Retweets were included as they are 'echoing' sentiment.<br></br>Retweets accounted for nearly half of all tweets with the word 'cubs', and nearly half of all those were retweets of tweets by the offical @Cubs account.<br></br>With this kind of exposure, it's clear official team tweets play a huge role in spreading sentiment.</p>
                <img id="Pie1" src="https://s3.amazonaws.com/cubsfletcher/PieChartX.png">
            </div>
        </div>
        <div id = "cont4">
            <h4 id = "subheaderBench">Benchmarking Sentiment Analyzer Applications</h4>
            <div id="BenchChartContainer">
                <img id="Bench1" src="https://s3.amazonaws.com/cubsfletcher/BenchChartX.png">
                 <p id="longB">A comparison of some of the best-known Sentiment Analyzer Apps. You can see that preprocessing/cleaning the words gives a different result for most.<br></br>Take this with a grain of salt though, as I only handlabeled 100 tweets as the test set, and it's also highly unlikely that any two people would label tweets the same.</p>
            </div>
            <div style="clear:both"></div>
        </div>
    </div>
    <div>
        <img id="bottomlogo" src="https://s3.amazonaws.com/cubsfletcher/chicago-cubs-logocute.png">
        <a id = "last" href="http://www.yongcho.com">www.yongcho.com</a>
    </div>
<script>
d3.json('https://s3.amazonaws.com/cubsfletcher/data1.json', function(data){   
    nv.addGraph(function() {
        var chart;
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
            .controlLabels({stacked: "Stacked"})
            .duration(4000)
            .showControls(false)
            .color(['red', 'aliceblue', 'darkblue']);


        chart.xAxis.tickFormat(function(d) { return d3.time.format('%I:%M %p')(new Date(d)) })
                    .axisLabel("Time");
        chart.yAxis.tickFormat(d3.format(',.0f'))
                    .axisLabel("Combined Tweet Counts")
                    .axisLabelDistance(-15);

        chart.legend.vers('furious');

        d3.select('#chart1')
            .datum(data)
            .transition().duration(1000)
            .call(chart)

        nv.utils.windowResize(chart.update);
        return chart;
    });
})

d3.json('https://s3.amazonaws.com/cubsfletcher/data2.json', function(data){   
    nv.addGraph(function() {
        var chart;
        chart = nv.models.stackedAreaChart()
            .useInteractiveGuideline(true)
            .x(function(d) { return d[0] })
            .y(function(d) { return d[1] })
            .controlLabels({stacked: "Stacked"})
            .duration(5000)
            .showControls(false)
            .color(['red', 'aliceblue', 'darkblue']);

        chart.xAxis.tickFormat(function(d) { return d3.time.format('%I:%M %p')(new Date(d)) })
                    .axisLabel("Time");
        chart.yAxis.tickFormat(d3.format(',.0f'))
                    .axisLabel("Combined Tweet Counts")
                    .axisLabelDistance(-15);

        chart.legend.vers('furious');

        d3.select('#chart2')
            .datum(data)
            .transition().duration(1000)
            .call(chart)
            // .each('start', function() {
            //     setTimeout(function() {
            //         d3.selectAll('#chart2 *').each(function() {
            //             if(this.__transition__)
            //                 this.__transition__.duration = 1;
            //         })
            //     }, 0)
            // });

        nv.utils.windowResize(chart.update);
        return chart;
    });
})

</script>
<script>
// https://css-tricks.com/snippets/jquery/smooth-scrolling/
    $('a[href*=#]:not([href=#])').click(function() {
    if (location.pathname.replace(/^\//,'') == this.pathname.replace(/^\//,'') 
        || location.hostname == this.hostname) {

        var target = $(this.hash);
        target = target.length ? target : $('[name=' + this.hash.slice(1) +']');
           if (target.length) {
             $('html,body').animate({
                 scrollTop: target.offset().top
            }, 1500); //1500 is the speed of the scroll transition.
            return false;
        }
    }
}); 
</script>
</body>
</html>